<div class="p-2">

  <h5
    *ngIf="dataService.networkSelected.networkInformation.description">{{'SIDEBAR_EDIT_DESCRIPTION_TITLE' | translate}}</h5>

  <div *ngIf="dataService.networkSelected.networkInformation.description">
    <p [innerHTML]="dataService.networkSelected.networkInformation.description"></p>
  </div>

  <div *ngIf="showLabelCheckbox" class="form-check mb-2">
    <input (click)="toggleLabels(!dataService.networkSelected.showLabels)"
           [checked]="dataService.networkSelected.showLabels" class="form-check-input" id="showLabels"
           type="checkbox">
    <label class="form-check-label" for="showLabels">
      {{'SIDEBAR_EDIT_CB_LABELS' | translate}}
    </label>
  </div>

  <app-chart *ngIf="showChart" [chartObject]="lineChartObject"
             [index]="index" [widthPercent]="100"></app-chart>

  <!-- color gradient for continuous mappings -->
  <div *ngIf="showColorGradient">
    <h5>
      <a [routerLink]="['', {outlets: {primary: ['mappings', dataService.networkSelected.id, index]} }]" role="button">
        <b>{{mapping.cleanStyleProperty || mapping.styleProperty}}</b>
        {{'SIDEBAR_EDIT_MAPPED_BY' | translate}}
        <b>{{mapping.col}}</b>
      </a>
    </h5>
    <div [style.background]="gradientBackground" [style.height.px]="200" [style.width.%]="100" class="mb-3">
    </div>
  </div>

  <!-- todo -->
  <div *ngIf="graphService.selectedElements.nodes.length > 0 || graphService.selectedElements.edges.length > 0">

    <hr>

    <!-- Display selected nodes -->
    <h5 *ngIf="graphService.selectedElements.nodes.length > 0">{{'SIDEBAR_EDIT_COMPARISON_NODES' | translate}}</h5>

    <div *ngIf="graphService.selectedElements.nodes.length > 0" class="table-responsive">
      <table class="table table-bordered">
        <tr>
          <td>&nbsp;</td>
          <td *ngFor="let node of graphService.selectedElements.nodes">
            <a (click)="graphService.highlightByElementId(node.id)" data-toggle="tooltip"
               ngbTooltip="{{'SIDEBAR_EDIT_TT_HIGHLIGHT_NODE' | translate}} {{node.id}}" placement="left"
               role="button">
              <b>{{node.name}} ({{node.id}})</b>
            </a>
          </td>
        </tr>
        <tr *ngFor="let akvn of dataService.networkSelected.aspectKeyValuesNodes">
          <td><b>{{akvn.name}}</b></td>
          <td *ngFor="let node of graphService.selectedElements.nodes">
            <span *ngFor="let attribute of node.attributes">
              <span *ngIf="attribute.keyHR === akvn.name">{{attribute.valueHR}}</span>
            </span>
          </td>
        </tr>
      </table>
    </div>

    <!-- Display selected edges -->
    <h5 *ngIf="graphService.selectedElements.edges.length > 0">{{'SIDEBAR_EDIT_COMPARISON_EDGES' | translate}}</h5>

    <div *ngIf="graphService.selectedElements.edges.length > 0" class="table-responsive">
      <table class="table table-bordered">
        <tr>
          <td>&nbsp;</td>
          <td *ngFor="let edge of graphService.selectedElements.edges">
            <a (click)="graphService.highlightByElementId(edge.id)" data-toggle="tooltip"
               ngbTooltip="{{'SIDEBAR_EDIT_TT_HIGHLIGHT_EDGE' | translate}} {{edge.id}}" placement="left"
               role="button">
              <b>{{edge.name}} ({{edge.id}})</b>
            </a>
          </td>
        </tr>
        <tr *ngFor="let akve of dataService.networkSelected.aspectKeyValuesEdges">
          <td><b>{{akve.name}}</b></td>
          <td *ngFor="let edge of graphService.selectedElements.edges">
            <span *ngFor="let attribute of edge.attributes">
              <span *ngIf="attribute.keyHR === akve.name">{{attribute.valueHR}}</span>
            </span>
          </td>
        </tr>
      </table>
    </div>

    <hr *ngIf="graphService.selectedElements.edges.length > 0">

  </div>

  <div aria-orientation="horizontal" class="nav nav-pills flex-row" id="editsNav" role="tablist">
    <a aria-controls="editsNavAspects" aria-selected="false" class="nav-link active" data-toggle="pill"
       href="#editsNavAspectsContent"
       id="editsNavAspects" role="tab">{{'SIDEBAR_EDIT_ATTRIBUTES_TITLE' | translate}}</a>
    <a aria-controls="editsNavInspect" aria-selected="false" class="nav-link" data-toggle="pill"
       href="#editsNavInspectContent"
       id="editsNavInspect" role="tab">{{'SIDEBAR_EDIT_INSPECT_TITLE' | translate}}</a>
    <a aria-controls="editsNavHighlights" aria-selected="true" class="nav-link" data-toggle="pill"
       href="#editsNavHighlightsContent"
       id="editsNavHighlights" role="tab">
      <fa-icon [icon]="faCogs"></fa-icon>
    </a>

  </div>

  <div class="tab-content p-2" id="editsNavContent">

    <!-- Edit: Aspects -->
    <div aria-labelledby="editsNavAspects" class="tab-pane fade show active" id="editsNavAspectsContent"
         role="tabpanel">

      <button [routerLink]="['', { outlets: {primary: ['mappings', dataService.networkSelected.id, -1]} }]"
              class="btn btn-lg btn-block btn-success mt-2 mb-2" data-toggle="tooltip"
              ngbTooltip="{{'SIDEBAR_EDIT_TT_MANAGE_MAPPINGS' | translate}}"
              placement="bottom">
        <fa-icon [icon]="faPalette" class="mr-2"></fa-icon>
        {{'SIDEBAR_EDIT_MANAGE_MAPPINGS' | translate}}
      </button>

      <h5
        *ngIf="dataService.networkSelected.mappings.nodesDiscrete.length > 0 || dataService.networkSelected.mappings.nodesContinuous.length > 0">
        {{'SIDEBAR_EDIT_ASPECTS_NODES' | translate}}
      </h5>

      <table
        *ngIf="dataService.networkSelected.mappings.nodesDiscrete.length > 0"
        class="table-responsive">
        <table class="table table-bordered">
          <tr *ngFor="let nodeMap of dataService.networkSelected.mappings.nodesDiscrete; let index = index">
            <td>
              <a
                [routerLink]="['', { outlets: {primary: ['mappings', dataService.networkSelected.id, 'nd' + index]} }]"
                role="button">
                <b>{{nodeMap.classifier}}</b>
              </a>
            </td>
            <td>
              <table class="table table-borderless">
                <tr class="border-bottom">
                  <td colspan="1">&nbsp;</td>
                  <td *ngFor="let styleProp of nodeMap.th"><b>{{styleProp}}</b></td>
                </tr>
                <tr *ngFor="let value of nodeMap.values">
                  <td class="border-right">
                    <a data-toggle="tooltip"
                       ngbTooltip="{{'SIDEBAR_EDIT_TT_SELECTOR' | translate}}" placement="left"
                       role="button"><b>{{value}}</b>
                    </a>
                  </td>
                  <td *ngFor="let style of nodeMap.styleMap">
                  <span *ngFor="let cssValue of style.cssValues">
                    {{cssValue}}
                    <span *ngIf="cssValue && cssValue.toString().indexOf('#') === 0"
                          [ngStyle]="{'background-color': cssValue}"
                          class="badge badge-pill border">&nbsp;
                    </span>
                  </span>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </table>

      <ul
        *ngIf="dataService.networkSelected.mappings.nodesContinuous.length > 0"
        class="list-group mb-2">
      <span *ngFor="let nodeMap of dataService.networkSelected.mappings.nodesContinuous; let index = index">
        <li *ngIf="!nodeMap.isColor" class="list-group-item">
          <a (click)="displayMapping(nodeMap.chart, [], 'nc' + index)" role="button">
            <b>{{nodeMap.cleanStyleProperty || nodeMap.styleProperty}}</b>
            {{'SIDEBAR_EDIT_MAPPED_BY' | translate}}
            <b> {{nodeMap.col}}</b>
          </a>
        </li>
        <li *ngIf="nodeMap.isColor" class="list-group-item">
          <a (click)="displayMapping(null, nodeMap.colorGradient, 'nc' + index)" role="button">
            <b>{{nodeMap.cleanStyleProperty || nodeMap.styleProperty}}</b>
            {{'SIDEBAR_EDIT_MAPPED_BY' | translate}}
            <b> {{nodeMap.col}}</b>
          </a>
        </li>
      </span>
      </ul>

      <h5
        *ngIf="dataService.networkSelected.mappings.edgesDiscrete.length > 0 || dataService.networkSelected.mappings.edgesContinuous.length > 0">
        {{'SIDEBAR_EDIT_ASPECTS_EDGES' | translate}}
      </h5>

      <table
        *ngIf="dataService.networkSelected.mappings.edgesDiscrete.length > 0"
        class="table-responsive">
        <table class="table table-bordered">
          <tr *ngFor="let edgeMap of dataService.networkSelected.mappings.edgesDiscrete; let index = index">
            <td>
              <a
                [routerLink]="['', { outlets: {primary: ['mappings', dataService.networkSelected.id, 'ed' + index]} }]"
                role="button">
                <b>{{edgeMap.classifier}}</b>
              </a>
            </td>
            <td>
              <table class="table table-borderless">
                <tr class="border-bottom">
                  <td colspan="1">&nbsp;</td>
                  <td *ngFor="let styleProp of edgeMap.th"><b>{{styleProp}}</b></td>
                </tr>
                <tr *ngFor="let value of edgeMap.values; let i = index">
                  <td class="border-right">
                    <a data-toggle="tooltip"
                       ngbTooltip="{{'SIDEBAR_EDIT_TT_SELECTOR' | translate}}" placement="left"
                       role="button"><b>{{value}}</b></a>
                  </td>
                  <td *ngFor="let style of edgeMap.styleMap">
                    {{style.cssValues[i]}}
                    <span *ngIf="style.cssValues && style.cssValues[i].toString().indexOf('#') === 0"
                          [ngStyle]="{'background-color': style.cssValues[i]}"
                          class="badge badge-pill border">&nbsp;
                  </span>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </table>

      <ul *ngIf="dataService.networkSelected.mappings.edgesContinuous.length > 0"
          class="list-group mb-2">
      <span *ngFor="let edgeMap of dataService.networkSelected.mappings.edgesContinuous; let index = index">
        <li *ngIf="!edgeMap.isColor" class="list-group-item">
          <a (click)="displayMapping(edgeMap.chart, [], 'ec' + index)" role="button">
            <b>{{edgeMap.cleanStyleProperty || edgeMap.styleProperty}}</b>
            {{'SIDEBAR_EDIT_MAPPED_BY' | translate}}
            <b>{{edgeMap.col}}</b>
          </a>
        </li>
        <li *ngIf="edgeMap.isColor" class="list-group-item">
          <a (click)="displayMapping(null, edgeMap.colorGradient, 'ec' + index)" role="button">
            <b>{{edgeMap.cleanStyleProperty || edgeMap.styleProperty}}</b>
            {{'SIDEBAR_EDIT_MAPPED_BY' | translate}}
            <b>{{edgeMap.col}}</b>
          </a>
        </li>

      </span>
      </ul>

    </div>

    <!-- Edit: Inspect -->
    <div aria-labelledby="editsNavInspect" class="tab-pane fade" id="editsNavInspectContent" role="tabpanel">
      <h1>WIP</h1>
      <p>To highlight elements within this network, we need to extract all available attributes from nodeAttributes /
        edgeAttributes</p>
      <p>Also need this to fix network stats onclick info-button</p>
    </div>

    <!-- Edit: Highlight color -->
    <div aria-labelledby="editsNavHighlights" class="tab-pane fade" id="editsNavHighlightsContent"
         role="tabpanel">

      <div class="alert alert-success" id="test" role="alert">
        <fa-icon [icon]="faPalette" class="mr-2"></fa-icon>
        <b>{{'SIDEBAR_EDIT_TOAST_UPDATE' | translate}}</b>
        <hr>
        <b>{{'SIDEBAR_EDIT_TOAST_NODES' | translate}}</b> {{highlightNodes}}<br>
        <b>{{'SIDEBAR_EDIT_TOAST_EDGES' | translate}}</b> {{highlightEdges}}<br>
        <b>{{'SIDEBAR_EDIT_TOAST_DURATION' | translate}}</b> {{highlightDuration}}<br>
      </div>

      <div class="form-row">

        <label for="highlightNodesHex">{{'SIDEBAR_EDIT_LABEL_HEX_NODE' | translate}}</label>
        <input [(ngModel)]="highlightNodes" class="form-control mb-2 col-10" id="highlightNodesHex"
               name="highlightNodesHex"
               placeholder="#ff0000" type="text">
        <span [ngStyle]="{'background-color': highlightNodes}" class="ml-2 mb-2 col badge badge-pill border">
          &nbsp;
        </span>

      </div>
      <div class="form-row">

        <label for="highlightEdgesHex">{{'SIDEBAR_EDIT_LABEL_HEX_EDGE' | translate}}</label>
        <input [(ngModel)]="highlightEdges" class="form-control mb-2 col-10" id="highlightEdgesHex"
               name="highlightEdgesHex"
               placeholder="#ff0000" type="text">
        <span [ngStyle]="{'background-color': highlightEdges}" class="ml-2 mb-2 col badge badge-pill border">
          &nbsp;
        </span>
      </div>
      <div class="form-row">
        <label for="highlightDuration">{{'SIDEBAR_EDIT_LABEL_DURATION' | translate}}</label>
        <input [(ngModel)]="highlightDuration" class="form-control mb-2" id="highlightDuration" min="0"
               name="highlightDuration"
               placeholder="2000"
               step="100" type="number">

        <button (click)="setHighlightColorAndDuration(highlightNodes, highlightEdges, highlightDuration)"
                class="btn btn-outline-success btn-block mb-3"
                type="button">
          {{'SIDEBAR_EDIT_BTN_SUBMIT' | translate}}</button>

      </div>
    </div>
  </div>
</div>


